<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>src/castconvert/castconvert.cxx File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">src/castconvert/castconvert.cxx File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br/>
<code>#include &quot;castconverthelpers2.h&quot;</code><br/>
<code>#include &quot;CommandLineArgumentHelper.h&quot;</code><br/>
<code>#include &quot;itkImageFileReader.h&quot;</code><br/>
<code>#include &quot;itkGDCMImageIO.h&quot;</code><br/>
<code>#include &quot;itkGE4ImageIOFactory.h&quot;</code><br/>
<code>#include &quot;itkGE5ImageIOFactory.h&quot;</code><br/>
<code>#include &quot;itkGEAdwImageIOFactory.h&quot;</code><br/>
<code>#include &quot;itkPhilipsRECImageIOFactory.h&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="castconvert_8cxx.html#ac43caf0f1dcddaaea130061b5259e9c4">FileConverterScalar</a> (const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputFileName, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="castconvert_8cxx.html#a8ececad47e20c5b1eceb57bb164aedad">DicomFileConverterScalarA</a> (const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputDirectoryName, const std::string &amp;seriesUID, const std::vector&lt; std::string &gt; &amp;restrictions, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="castconvert_8cxx.html#aa70434a2b6a0270b8854e10b92ff9019">DicomFileConverterScalarB</a> (const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputDirectoryName, const std::string &amp;seriesUID, const std::vector&lt; std::string &gt; &amp;restrictions, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="castconvert_8cxx.html#afabcf309b13c79f2370c774dc87c20f8">FileConverterMultiComponent</a> (const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const unsigned int numberOfComponents, const std::string &amp;inputFileName, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="castconvert_8cxx.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8ececad47e20c5b1eceb57bb164aedad"></a><!-- doxytag: member="castconvert.cxx::DicomFileConverterScalarA" ref="a8ececad47e20c5b1eceb57bb164aedad" args="(const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputDirectoryName, const std::string &amp;seriesUID, const std::vector&lt; std::string &gt; &amp;restrictions, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DicomFileConverterScalarA </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputDirectoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>seriesUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>restrictions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>inputDimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCompression</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Authors: Marius Staring and Stefan Klein </p>

<p><p>Support for 3D images.</p>
<p>From unsigned char to something else.</p>
<p>From char to something else.</p>
<p>From unsigned short to something else.</p>
<p>From short to something else.</p>
<p>From unsigned int to something else.</p>
<p>Return a value. </p>
</p>

</div>
</div>
<a class="anchor" id="aa70434a2b6a0270b8854e10b92ff9019"></a><!-- doxytag: member="castconvert.cxx::DicomFileConverterScalarB" ref="aa70434a2b6a0270b8854e10b92ff9019" args="(const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputDirectoryName, const std::string &amp;seriesUID, const std::vector&lt; std::string &gt; &amp;restrictions, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DicomFileConverterScalarB </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputDirectoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>seriesUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>restrictions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>inputDimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCompression</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Authors: Marius Staring and Stefan Klein </p>

<p><p>Support for 3D images.</p>
<p>From int to something else.</p>
<p>From float to something else.</p>
<p>From double to something else.</p>
<p>Return a value. </p>
</p>

</div>
</div>
<a class="anchor" id="afabcf309b13c79f2370c774dc87c20f8"></a><!-- doxytag: member="castconvert.cxx::FileConverterMultiComponent" ref="afabcf309b13c79f2370c774dc87c20f8" args="(const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const unsigned int numberOfComponents, const std::string &amp;inputFileName, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileConverterMultiComponent </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>numberOfComponents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>inputDimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCompression</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Support for 2D images.</p>
<p>Return a succes value. </p>
</p>

</div>
</div>
<a class="anchor" id="ac43caf0f1dcddaaea130061b5259e9c4"></a><!-- doxytag: member="castconvert.cxx::FileConverterScalar" ref="ac43caf0f1dcddaaea130061b5259e9c4" args="(const std::string &amp;inputPixelComponentType, const std::string &amp;outputPixelComponentType, const std::string &amp;inputFileName, const std::string &amp;outputFileName, const unsigned int inputDimension, bool useCompression)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FileConverterScalar </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputPixelComponentType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>inputDimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useCompression</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>castconvert</p>
<p>This program converts and possibly casts images.</p>
<p>This is done by reading in an image, possibly casting of the image, and subsequently writing the image to some format. With converting we mean changing the extension of the image, such as bmp, mhd, etc. With casting we mean changing the component type of a voxel, such as short, unsigned long, float.</p>
<p>Casting is currently done for scalar images using the ShiftScaleImageFilter, where values are mapped to itself, leaving the intensity range the same. NOTE that when casting to a component type with a smaller dynamic range, information might get lost. In this case we might use the RescaleIntensityImageFilter to linearly rescale the image values. For multi-component images, such as vector or RGB images, casting is done using the itk::VectorCastImageFilter.</p>
<p>Currently supported are the SCALAR pixel types and also multi- component pixel types, such as vector and RGB pixels. For multi- component pixel types, everything is read in as an itk::Vector with the correct pixel component type and number of components. This is also the case for the writer.</p>
<p>Input images can be in all file formats ITK supports and for which the ImageFileReader works, and additionally 3D dicom series using the ImageSeriesReader. It is also possible to extract a specific DICOM series from a directory by supplying the seriesUID. The pixel component type should of course be a component type supported by the file format. Output images can be in all file formats ITK supports and for which the ImageFileReader works, so no dicom output is currently supported.</p>
<p>Usage: pxcastconvert -in inputFileName -out outputFileName [-opct outputPixelComponentType] OR: pxcastconvert -in dicomDirectoryName -out outputFileName [-opct outputPixelComponentType] [-s seriesUID]</p>
<p>Where outputPixelComponentType is one of: unsigned_char, char, unsigned_short, short, unsigned_int, int, unsigned_long, long, float or double. By default the outputPixelComponentType is set to the inputPixelComponentType. By default the seriesUID is the first UID found.</p>
<p>authors: Marius Staring and Stefan Klein</p>
<p>Thanks to Hans J. Johnson for a modification to this program. This modification breaks down the program into smaller compilation units, so that the compiler does not overflow.</p>
<p>ENH: on 23-05-2006 we added multi-component support. ENH: on 09-06-2006 we added support for extracting a specific DICOM serie. Functions to do the actual conversion. </p>

<p><p>Support for 2D images.</p>
<p>Return a succes value. </p>
</p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a><!-- doxytag: member="castconvert.cxx::main" ref="a3c04138a5bfe5d72780bb7e82a18e627" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>TASK 1: Check arguments. *******************************************************************</p>
<p>Register some non-standard IO Factories to make the tool more useful. Copied from the Insight Applications.</p>
<p>Get the command line arguments.</p>
<p>Are we dealing with an image or a dicom series?</p>
<p>Get inputFileName or inputDirectoryName.</p>
<p>TASK 2: Typedefs and test reading to determine correct image types. *******************************************************************</p>
<p>Initial image type.</p>
<p>Some typedef's.</p>
<p>Create a testReader.</p>
<p>Setup the testReader.</p>
<p>Set the inputFileName in the testReader.</p>
<p>Create a dicom ImageIO and set it in the testReader.</p>
<p>Set the name of the 2D dicom image in the testReader.</p>
<p>Generate all information.</p>
<p>Extract the ImageIO from the testReader.</p>
<p>Get the component type, number of components, dimension and pixel type.</p>
<p>TASK 3: Do some preparations. *******************************************************************</p>
<p>Check inputPixelType.</p>
<p>In this case an illegal inputPixelComponentType is found.</p>
<p>Check outputPixelType.</p>
<p>In this case this option is not given, and by default we set it to the inputPixelComponentType.</p>
<p>Get rid of the "_" in inputPixelComponentType and outputPixelComponentType.</p>
<p>TASK 4: Now we are ready to check on image type and subsequently call the correct ReadCastWrite-function. *******************************************************************</p>
<p>****************** Support for SCALAR pixel types. **********************************</p>
<p>****************** Support for multi-component pixel types. **********************************</p>
<p>In this case input is a DICOM series, from which we only support SCALAR pixel types, with component type: DICOMImageIO2: (unsigned) char, (unsigned) short, float GDCMImageIO: (unsigned) char, (unsigned) short, (unsigned) int, double It is also assumed that the dicom series consist of multiple 2D images forming a 3D image.</p>
<p>If any errors have occurred, catch and print the exception and return false.</p>
<p>End program. Return success. </p>
</p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Apr 30 2011 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
